{% extends "layouts/base.html" %}
{% load static %}

{% block title %}{{ title }}{% endblock %}

{% block content %}
<div class="space-y-6 px-4 sm:px-6">

    <h1 class="text-2xl font-bold text-gray-800">{{ title }}</h1>
    
    <!-- Prueba de breadcrumbs o migas de pan, se pasa la info desde la vista como contexto -->
    {% include "components/breadcrumbs.html" with breadcrumbs=breadcrumb_list %}
    
    <!-- Cabecera con título y botones de acción -->
    <div class="header-container mb-6">
        <div class="flex flex-col md:flex-row md:justify-between md:items-center gap-4">
            <div class="contenedor_estadicticas w-full md:w-auto">
                {% block card_statistics %}
                    <!-- Aquí se incluyen las tarjetas de estadísticas -->
                {% endblock %}
            </div>
        </div>
    </div>

    <!-- Filtros y acciones -->
    <div class="filters-container mb-6 flex flex-col sm:flex-row gap-4 items-start sm:items-center">
        <div class="w-full sm:w-auto sm:flex-grow">
            {% include "components/searchbar.html" with action="" name="q" placeholder="Buscar..." id="buscador-generico" value=request.GET.q %}
        </div>
        <div class="flex flex-wrap gap-2">
            {% block action_buttons %}
            {% endblock %}
        </div>
    </div>

    <!-- Tabla de datos -->
    <div class="table-container">
        <div class="overflow-x-auto bg-white rounded-lg shadow responsive-table">
            {% block table_actions %}
                <div class="action-buttons p-2 bg-gray-50 border-b border-gray-200 flex justify-end">
                    <!-- Botón de recarga para actualizar la lista sin recargar la página -->
                    {% include "components/button.html" with btn_type="recargar" id="btn-recargar" title="recargar" %}
                </div>
            {% endblock %}
            
            <div class="table-wrapper">
                <table class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-gray-50">
                        <tr class="responsive-headers">
                            {% block table_header %}
                                <!-- Aquí van las cabeceras de la tabla -->
                            {% endblock %}
                        </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-200">
                        {% block table_body %}
                        {% endblock %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Paginación simpre dispuesta -->
    {% if is_paginated %}
        <div class="pagination-container mt-6">
            {% include "includes/pagination.html" with page_obj=page_obj %}
        </div>
    {% endif %}

</div>
{% endblock %}

{% block extra_scripts%}
<script src="{% static 'js/list.js' %}"></script>
{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/list.css' %}">
{% endblock %}